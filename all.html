<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Version Randomizer Redirect</title>
  <meta name="robots" content="noindex, nofollow" />
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      display: grid;
      place-items: center;
      background: #0b0c10;
      color: #c5c6c7;
    }
    .card {
      max-width: 640px;
      padding: 1.25rem 1.5rem;
      border: 1px solid #1f2833;
      border-radius: 12px;
      background: #0f1115;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    code { padding: .1rem .3rem; background: #11151a; border-radius: 6px; }
    a { color: #66fcf1; }
  </style>
</head>
<body>
  <div class="card" role="status" aria-live="polite">
    <h1>Redirectingâ€¦</h1>
    <p>If you are not redirected automatically, <a id="link" href="#" rel="nofollow">click here</a>.</p>
    <p style="font-size:.9rem;opacity:.8">Tip: pass <code>?max=7</code> (or any positive integer) to control the range. Defaults to <code>5</code>.</p>
  </div>

  <script>
    (function () {
      // Default max if not provided or invalid
      var DEFAULT_MAX = 5;

      function parseMax() {
        try {
          var params = new URLSearchParams(window.location.search);
          var raw = params.get('max');
          if (raw === null || raw === '') return DEFAULT_MAX;
          var n = Number(raw);
          if (!Number.isFinite(n)) return DEFAULT_MAX;
          n = Math.floor(n);
          if (n < 1) return DEFAULT_MAX;
          return n;
        } catch (e) {
          return DEFAULT_MAX;
        }
      }

      // Uniform random integer in [1, n] using crypto to avoid modulo bias
      function randomIntInclusive(n) {
        if (n <= 1) return 1;
        var range = n;
        var maxUint = 0x100000000; // 2^32
        var buckets = Math.floor(maxUint / range) * range;
        var r;
        var u32 = new Uint32Array(1);
        do {
          crypto.getRandomValues(u32);
          r = u32[0];
        } while (r >= buckets);
        return (r % range) + 1;
      }

      var max = parseMax();
      var versionNumber = randomIntInclusive(max);
      var target = "https://sktoushi.github.io/su/allv" + String(versionNumber) + ".html";

      // Update visible link for users without JS redirects
      var link = document.getElementById('link');
      if (link) link.href = target;

      // Replace so back button doesn't bounce back to the randomizer
      window.location.replace(target);
    })();
  </script>

  <noscript>
    <p style="text-align:center">JavaScript is required to auto-redirect. Please enable JavaScript or visit
      <a href="https://sktoushi.github.io/su/">https://sktoushi.github.io/su/</a> and choose a version manually.
    </p>
  </noscript>
</body>
</html>
